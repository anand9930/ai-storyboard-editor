/* ReactFlow custom styles - uses CSS variables for theming */

/* Canvas Background */
.react-flow__background {
  background-color: var(--flow-canvas-bg) !important;
}

/* Background pattern (dots/grid) */
.react-flow__background pattern circle {
  fill: var(--flow-canvas-dots) !important;
}

.react-flow__background pattern line {
  stroke: var(--flow-canvas-dots) !important;
}

/* Edges */
.react-flow__edge-path {
  stroke: var(--flow-edge-stroke) !important;
  stroke-width: 2 !important;
}

/* Highlighted edges - connected to selected nodes */
.react-flow__edge.highlighted .react-flow__edge-path {
  stroke: var(--flow-edge-stroke-highlighted) !important;
}

/* Node status borders - override selection border */
.node-status-processing {
  border-color: color-mix(in oklch, var(--status-processing) 50%, transparent) !important;
}
.node-status-completed {
  border-color: color-mix(in oklch, var(--status-success) 50%, transparent) !important;
}
.node-status-error {
  border-color: color-mix(in oklch, var(--status-error) 50%, transparent) !important;
}

/* Connection line (while dragging) */
.react-flow__connection-line {
  stroke: var(--primary) !important;
  stroke-width: 2 !important;
}

/* Handles - transparent but functional */
.react-flow__handle {
  width: 16px !important;
  height: 16px !important;
  background: transparent !important;
  border: none !important;
}

.react-flow__handle-left {
  background-color: transparent !important;
  transform: translate(0%, -50%) !important;
}

.react-flow__handle-right {
  background-color: transparent !important;
  transform: translate(0%, -50%) !important;
}

/* Vertically centered left sidebar panel */
.left-sidebar-centered {
  top: 50% !important;
  transform: translateY(-50%) !important;
}

/* Group Node Styles */
.react-flow__node-group {
  /* Group nodes should be behind their children */
  z-index: -1 !important;
  /* Remove React Flow default styling - we use custom colored borders */
  border: none !important;
  padding: 0 !important;
  background: transparent !important;
  box-shadow: none !important;
}

.react-flow__node-group.selected {
  z-index: 0 !important;
  /* Override selection box-shadow */
  box-shadow: none !important;
}

/* Ensure child nodes render above group background */
.react-flow__node-group ~ .react-flow__node {
  z-index: 1;
}

/* Group node selection - override default selection styling */
.react-flow__node-group .react-flow__handle {
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
}

.react-flow__node-group:hover .react-flow__handle,
.react-flow__node-group.selected .react-flow__handle {
  opacity: 1;
}

/* Group node resize handles - themed border for contrast */
.react-flow__node-group .react-flow__resize-control.handle {
  border: 1px solid var(--background) !important;
}

/* Group node resize lines - slightly transparent */
.react-flow__node-group .react-flow__resize-control.line {
  opacity: 0.7;
}
