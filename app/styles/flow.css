/* ReactFlow custom styles - uses CSS variables for theming */

/* Canvas Background */
.react-flow__background {
  background-color: hsl(var(--flow-canvas-bg)) !important;
}

/* Background pattern (dots/grid) */
.react-flow__background pattern circle {
  fill: hsl(var(--flow-canvas-dots)) !important;
}

.react-flow__background pattern line {
  stroke: hsl(var(--flow-canvas-dots)) !important;
}

/* MiniMap */
.react-flow__minimap {
  background-color: hsl(var(--flow-minimap-bg)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 8px !important;
}

.react-flow__minimap-mask {
  fill: hsl(var(--flow-minimap-mask) / 0.8) !important;
}

.react-flow__minimap-node {
  fill: hsl(var(--flow-minimap-node)) !important;
}

/* Controls */
.react-flow__controls {
  background-color: hsl(var(--flow-controls-bg)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 8px !important;
}

.react-flow__controls-button {
  background-color: hsl(var(--flow-controls-bg)) !important;
  border-color: hsl(var(--border)) !important;
  fill: hsl(var(--muted-foreground)) !important;
}

.react-flow__controls-button:hover {
  background-color: hsl(var(--accent)) !important;
}

/* Edges */
.react-flow__edge-path {
  stroke: hsl(var(--flow-edge-stroke)) !important;
  stroke-width: 1 !important;
}

/* Highlighted edges - connected to selected nodes */
.react-flow__edge.highlighted .react-flow__edge-path {
  stroke: hsl(var(--flow-edge-stroke-highlighted)) !important;
}

/* Node status borders - override selection border */
.node-status-processing {
  border-color: hsl(217.2 91.2% 59.8% / 0.5) !important;
}
.node-status-completed {
  border-color: hsl(142 76% 36% / 0.5) !important;
}
.node-status-error {
  border-color: hsl(0 84% 60% / 0.5) !important;
}

/* Connection line (while dragging) */
.react-flow__connection-line {
  stroke: hsl(var(--primary)) !important;
  stroke-width: 2 !important;
}

/* Handles - transparent but functional */
.react-flow__handle {
  width: 16px !important;
  height: 16px !important;
  background: transparent !important;
  border: none !important;
}

.react-flow__handle-left {
  background-color: transparent !important;
  transform: translate(0%, -50%) !important;
}

.react-flow__handle-right {
  background-color: transparent !important;
  transform: translate(0%, -50%) !important;
}

/* Vertically centered left sidebar panel */
.left-sidebar-centered {
  top: 50% !important;
  transform: translateY(-50%) !important;
}

/* Group Node Styles */
.react-flow__node-group {
  /* Group nodes should be behind their children */
  z-index: -1 !important;
  /* Remove React Flow default styling - we use custom colored borders */
  border: none !important;
  padding: 0 !important;
  background: transparent !important;
  box-shadow: none !important;
}

.react-flow__node-group.selected {
  z-index: 0 !important;
  /* Override selection box-shadow */
  box-shadow: none !important;
}

/* Ensure child nodes render above group background */
.react-flow__node-group ~ .react-flow__node {
  z-index: 1;
}

/* Group node selection - override default selection styling */
.react-flow__node-group .react-flow__handle {
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
}

.react-flow__node-group:hover .react-flow__handle,
.react-flow__node-group.selected .react-flow__handle {
  opacity: 1;
}

/* Group node resize handles - white border for contrast */
.react-flow__node-group .react-flow__resize-control.handle {
  border: 1px solid white !important;
}

/* Group node resize lines - slightly transparent */
.react-flow__node-group .react-flow__resize-control.line {
  opacity: 0.7;
}
